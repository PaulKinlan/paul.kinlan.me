--- 
layout: post
title: "DoubleAnimation Crashes XAMLPad (MayCTP): Some Answers To Questions"
published: true
---
I posted around some news groups to find an answer about my crash and a I recieved the following reply from Mike Hillbert.<p /><blockquote>When you're animating Width or Height, you have to specify both the From and the To, or you have to have specified the base value somewhere (e.g. on the element itself).<p />That's because when you don't specify the From or To it gets inferred from the base (unanimated) value.  And in the case of Width and Height, the base value often isn't known until later when layout runs.<p />For example, in this page<p />&lt;Page ...&gt;<br />    ...<br />    &lt;Page.Storyboards&gt;<br />       &lt;SetterTimeline TargetName="btn" Path="(Button.Width)" &gt;<br />            &lt;DoubleAnimation From="50"  /&gt;<br />       &lt;/SetterTimeline&gt;<br />    &lt;/Page.Storyboards&gt;<br />    ...<br />    &lt;Button Width="100" Name="btn" Background="Blue"&gt;Click&lt;/Button&gt;<br />    ...<br />&lt;/Page&gt;<p />the button's width is explicitly set on the &lt;Button&gt;, so the animation implicitly takes the width to 100 (from 50).  But if you don't have the Width set in the &lt;Button&gt;, and don't have it anywhere else (e.g. in a Style), you have to have the From on the DoubleAnimation.</blockquote><p />I think it basically sums up the problem quite simply.  I wasn't giving the actual MenuItem a width, the "Owner Draw" elements in the Visual Tree had a width but the actual menu item didn't.  Funnily enough (Well it is not that funny), I tried the suggested fixes and the crash was still occuring.  I also tried the following bit of XAML which is supposed to give every control that meets the style criteria a width of 200:<p /><blockquote class="posterous_short_quote">&lt;Style TargetType="{x:Type MenuItem}" x:Key="{x:Type MenuItem}" &gt;<br /> &lt;Setter Property="Width" Value="200" /&gt;<br /> ...<br /> ...</blockquote><p />I think my next course of action is to try and get this in a proper WinFX application rather than just XAMLPad.<div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/8109338-111843375042179676?l=www.kinlan.co.uk%2Findex.html" height="1" alt="" width="1" /></div>

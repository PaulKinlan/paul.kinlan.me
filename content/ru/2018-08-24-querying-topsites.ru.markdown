---
slug: lighthouse-scores-for-in-domains
date: 2018-08-24T08:09:10.405Z
title: Getting Lighthouse scores from HTTPArchive for sites in India.
description: A quick dive in to how to use Lighthouse to try and understand how users in a country might experience the web.
tags: [webdev, bigquery, lighthouse, india]
---


Я собираюсь отправиться в короткую поездку в Индию, и я думал о долгосрочных отношениях с разработчиками для Chrome и Web в регионе. Как и в большинстве поездок, мне нравится делать немного исследований загодя, поэтому я могу лучше понять, как выглядит веб-сайт с точки зрения страны, в которой я посещаю.

За последние пару месяцев я следил за обновлениями [HTTPArchive](https://httparchive.org/), и было замечательно видеть улучшения в отношении типов данных, которые он собирает и хранит в своем [ BigQuery](https://github.com/HTTPArchive/legacy.httparchive.org/blob/master/docs/bigquery-gettingstarted.md). Одна конкретная информация, представляющая большой интерес для меня, - это данные [Маяк](https://developers.google.com/web/tools/lighthouse/), сгенерированные при каждом запуске HTTPArchive. С этими данными я был заинтересован, чтобы увидеть, могу ли я использовать его, чтобы получить снимок данных и получить представление на высоком уровне о том, как люди могут испытывать Интернет в стране.

Хорошей новостью является то, что анализировать данные маяка в HTTPArchive не так уж сложно.

Тем не менее, для моих нужд сложнее понять, что такое «верхний сайт» в любой стране, особенно когда я думаю о работе разработчиков, которые мы могли бы и должны делать.

Вот как я нарушил проблему. В каждой стране существует множество типов разработчиков, которые строят для Интернета, и лично я склоняю их к трем группам: те, чей текущий проект нацелен на местный рынок; Те, которые нацелены на внешний рынок (я строю для экспорта); и те, которые нацелены на глобальную аудиторию.

Когда я думаю об этих трех группах, практически невозможно выработать цель сайта и людей, стоящих за ним. Но есть несколько эвристик, которые вы можете использовать, по крайней мере, для того, чтобы вы могли рассуждать и понимать данные.

Для моего анализа я не думал, что могу получить список лучших сайтов, посещаемых пользователями в Индии, поэтому я сделал простое предположение, что домены «.in» скорее всего будут созданы для людей в Индии. Чувствительность и специфичность для вопроса о «индийских сайтах» не на 100%, если сосредоточиться на «.in domains» & mdash; пользователи во всем мире любят использовать опыт, который не просто заблокирован для TLD стран; но это кажется приличной мерой состояния индийских сайтов в качестве первого прохода.

Этот тип анализа оказывается довольно простым. Вы открываете [BigQuery](https://github.com/HTTPArchive/legacy.httparchive.org/blob/master/docs/bigquery-gettingstarted.md) и находите последнюю таблицу, содержащую запуск данных Lighthouse [httparchive: маяк .2018_08_01_mobile] в этом случае и выполните следующий запрос.


```sql
SELECT
  url,
  JSON_EXTRACT(report, '$.categories.seo.score') AS [seo_score],
  JSON_EXTRACT(report, '$.categories.pwa.score') AS [pwa_score],
  JSON_EXTRACT(report, '$.categories.performance.score') AS [speed_score],
  JSON_EXTRACT(report, '$.categories.accessibility.score') AS [accessibility_score]
FROM
  [httparchive:lighthouse.2018_08_01_mobile]
WHERE
  url LIKE '%.in/'
```


Вышеприведенный запрос фильтруется по доменам, заканчивающимся на «.in», и возвращает показатель Lighthouse для каждой категории тестов Lighthouse. Данные Lighthouse хранятся как объект JSON, который необходимо извлечь из требуемых компонентов с помощью синтаксиса XPath для JSON.

Количество результатов на самом деле довольно большое и не очень полезно для представления здесь, но я сделал их в гистограмме.

<table><thead><th> Диапазон оценки </th><th> Оценка SEO </th><th> Оценка PWA </th><th> Оценка скорости </th><th> Оценка A11Y </th></thead><tbody><tr><td> 0 </td><td> 0 </td><td> 46 </td><td> 279 </td><td> 25 </td></tr><tr><td> 0,5 </td><td> 84 </td><td> 13992 </td><td> 6502 </td><td> 3973 </td></tr><tr><td> 0.7 </td><td> 3391 </td><td> 1400 </td><td> 2222 </td><td> 7585 </td></tr><tr><td> 0.8 </td><td> 1438 </td><td> 19 </td><td> 1147 </td><td> 2374 </td></tr><tr><td> 0.9 </td><td> 2762 </td><td> 9 </td><td> 1545 </td><td> 1069 </td></tr><tr><td> 1 </td><td> 7752 </td><td> 13 </td><td> 3189 </td><td> 434 </td></tr></tbody></table>

Необходимо провести подробный анализ и анализ данных, чтобы точно понять, какие конкретные проблемы влияют на результаты, однако в некоторых случаях, например, с помощью показателя «PWA Score», я видел в прошлом достаточное количество баллов в прошлом, чтобы знать какие проблемы влияют на общий балл, и я вижу некоторые из проблем, которые впереди нас.

Следующий. Попытайтесь найти способ получить сайты, которые часто посещают индийские пользователи ... Подсказка, это [здесь](/ crux-topsites-and-lighthouse-scores-for-india /)
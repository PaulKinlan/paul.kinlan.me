---
slug: file-web-share-target
date: 2019-02-15T15:52:03.183Z
title: 'File Web Share Target'
tags: [share, intents]
---

ਮੈਂ ਅਕਸਰ ਕਿਹਾ ਹੈ ਕਿ ਐਪਸ ਦੇ ਸੰਸਾਰ ਵਿੱਚ ਵੈਬ ਐਪਸ ਨੂੰ ਪ੍ਰਭਾਵਸ਼ਾਲੀ ਢੰਗ ਨਾਲ ਮੁਕਾਬਲਾ ਕਰਨ ਲਈ ਉਹਨਾਂ ਨੂੰ ਉਹਨਾਂ ਸਾਰੇ ਸਥਾਨਾਂ ਵਿੱਚ ਜੋੜਿਆ ਜਾਣਾ ਚਾਹੀਦਾ ਹੈ ਜਿਹਨਾਂ ਦੇ ਉਪਭੋਗਤਾ ਐਪਸ ਨੂੰ ਹੋਣ ਦੀ ਉਮੀਦ ਕਰਦੇ ਹਨ. ਇੰਟਰ-ਐਪ ਸੰਚਾਰ ਵੈਬ ਪਲੇਟਫਾਰਮ ਦੇ ਮੁੱਖ [data out of their silo](/unintended-silos/) ਵਿੱਚੋਂ ਇੱਕ ਹੈ, ਅਤੇ ਵਿਸ਼ੇਸ਼ ਤੌਰ &#39;ਤੇ ਆਖਰੀ ਮੁੱਖ ਵਿਸ਼ੇਸ਼ਤਾਵਾਂ ਵਿੱਚੋਂ ਇੱਕ ਹੈ ਮੂਲ ਪੱਧਰ ਸ਼ੇਅਰਿੰਗ: ਵੈਬ ਐਪਸ ਨੂੰ [data out of their silo](/unintended-silos/) ਅਤੇ ਹੋਰ ਵੈਬ ਸਾਈਟਾਂ ਅਤੇ ਐਪਸ ਵਿੱਚ ਪ੍ਰਾਪਤ ਕਰਨ ਦੀ ਜ਼ਰੂਰਤ ਹੈ; ਉਹਨਾਂ ਨੂੰ ਹੋਰ ਮੂਲ ਐਪਸ ਅਤੇ ਸਾਈਟਾਂ ਤੋਂ ਡਾਟਾ ਪ੍ਰਾਪਤ ਕਰਨ ਦੇ ਯੋਗ ਹੋਣਾ ਚਾਹੀਦਾ ਹੈ.

ਫਾਇਲ ਸ਼ੇਅਰ ਟਾਰਗੇਟ API ਇੱਕ API ਦਾ ਇੱਕ ਗੇਮ-ਚੇਂਜਰ ਹੈ ਜੋ ਹੁਣ Chrome ਕਨੇਰੀ ਵਿੱਚ ਹੈ API ਵਿੱਚ [Web Share Target API](https://github.com/WICG/web-share-target/blob/master/docs/explainer.md) ਵਿਸਤ੍ਰਿਤਤਾ ਦਿੱਤੀ [Web Share Target API](https://github.com/WICG/web-share-target/blob/master/docs/explainer.md) ਜੋ ਐਪਸ ਅਤੇ ਸਾਈਟਾਂ ਨੂੰ ਸਧਾਰਣ ਲਿੰਕਾਂ ਅਤੇ [Web Share Target API](https://github.com/WICG/web-share-target/blob/master/docs/explainer.md) ਨੂੰ ਵੈਬ ਸਾਈਟਸ ਨੂੰ ਸ਼ੇਅਰਿੰਗ ਕਾਰਜਸ਼ੀਲਤਾ ਦੀਆਂ ਪ੍ਰਣਾਲੀਆਂ ਵਿੱਚ ਜੋੜ ਕੇ ਉਹਨਾਂ ਨੂੰ ਸਾਂਝਾ ਕਰਨ ਦਿੰਦੀ ਹੈ.

ਇਹ ਬਹੁਤ ਹੀ ਸਥਿਰ ਫਾਈਲ ਬਲੌਗ ਵੈੱਬ ਸ਼ੇਅਰ ਟਾਰਗਿਟ ਏਪੀਆਈ ਦਾ ਇਸਤੇਮਾਲ ਕਰਦਾ ਹੈ ਤਾਂ ਜੋ ਮੈਂ ਛੇਤੀ ਤੋਂ ਛੇਤੀ [share links](/web-share-target-api/) ਕਰ [share links](/web-share-target-api/) ਜਿਸ ਨੂੰ ਮੈਨੂੰ ਕਿਸੇ ਵੀ ਐਡਰਾਇਡ ਐਪਲੀਕੇਸ਼ਨ ਤੋਂ ਦਿਲਚਸਪ ਲਗਦਾ ਹੈ, ਅਤੇ ਪਿਛਲੇ ਹਫ਼ਤੇ ਜਿਵੇਂ [I enabled the File Share Target API so that I can upload images to my blog directly from the Camera app on Android](/testing-file-share-target-from-camera/) ਇਹ ਪੋਸਟ ਇਸ ਬਾਰੇ ਸਭ ਕੁਝ ਹੈ ਕਿ ਮੈਂ ਇਹ ਕਿਵੇਂ ਕੀਤਾ (ਅਤੇ ਜੇਕ ਆਰਕਬਾਈਬਲਡ - ਟੀਬੀਐਫ ਦੇ ਕੁਝ ਕੋਡ ਨੂੰ ਚੋਰੀ ਕੀਤਾ ਸੀ) ਉਸਨੇ WORDS2 ਵਿੱਚ ਕੀਤੇ ਗਏ ਏਕੀਕਰਨ ਲਈ ਬਹੁਤ ਸਾਰੀਆਂ ਬੱਗਾਂ ਨੂੰ ਬਾਹਰ [squoosh.app](https://squoosh.app/) .)

[File Share Target API](https://wicg.github.io/web-share-target/level-2/#example-3-manifest-webmanifest) ਇੱਕ ਬਹੁਤ ਹੀ ਨਾਵਲ ਐਪੀਆਈ ਹੈ ਕਿ ਇਹ ਪੂਰੀ ਤਰ੍ਹਾਂ ਪ੍ਰਗਤੀਸ਼ੀਲ ਹੈ ਜੇ ਤੁਹਾਡੀ ਐਪਲੀਕੇਸ਼ਨ ਫਾਰਮ `POST` ਬੇਨਤੀ ਨੂੰ ਸੰਭਾਲ ਸਕਦੀ ਹੈ ਤਾਂ ਤੁਸੀਂ ਇਸ API ਨਾਲ ਅਸਾਨੀ ਨਾਲ ਜੋੜ ਸਕਦੇ ਹੋ. ਮੂਲ ਪ੍ਰਵਾਹ ਇਹ ਹੈ ਕਿ ਜਦੋਂ ਉਪਭੋਗਤਾ ਤੁਹਾਡੀ ਐਪਲੀਕੇਸ਼ਨ ਨੂੰ ਮੂਲ ਚੋਣਕਰਤਾ ਤੋਂ ਚੁਣਦਾ ਹੈ, ਤਾਂ Chrome ਤੁਹਾਡੇ ਸਰਵਰ ਨੂੰ ਇੱਕ ਫ਼ਾਰਮ `POST` ਬੇਨਤੀ ਭੇਜੇਗਾ, ਇਹ ਤੁਹਾਡੇ ਤੇ ਨਿਰਭਰ ਕਰਦਾ ਹੈ ਕਿ ਤੁਸੀਂ ਇਸ ਨਾਲ ਕੀ ਕਰਨਾ ਹੈ (ਸੇਵਾ ਕਰਮਚਾਰੀ ਜਾਂ ਸਰਵਰ ਤੇ ਹੈਂਡਲ ਕਰਨਾ).

ਆਪਣੀਆਂ ਵੈਬ ਐਪ ਵਿੱਚ ਫਾਈਲਾਂ ਸਾਂਝੀਆਂ ਕਰਨ ਲਈ ਸਹਾਇਤਾ ਨੂੰ ਜੋੜਨ ਲਈ ਤੁਹਾਨੂੰ ਦੋ ਚੀਜ਼ਾਂ ਦੀ ਲੋੜ ਹੈ:

1. ਮੈਨੀਫੈਸਟ ਫਾਈਲ ਦੇ ਰਾਹੀਂ ਫਾਈਲਾਂ ਸ਼ੇਅਰ ਕਰਨ ਲਈ ਸਮਰਥਨ ਦਾ ਐਲਾਨ ਕਰੋ,
2. ਆਪਣੇ ਸੇਵਾ ਵਰਕਰ ਵਿਚ ਫ਼ਾਰਮ `POST` ਬੇਨਤੀ ਨੂੰ ਹੈਂਡਲ ਕਰੋ.

ਮੈਨੀਫੈਸਟ ਮੇਜ਼ਬਾਨ ਪ੍ਰਣਾਲੀ ਨੂੰ ਕਿਵੇਂ ਵੇਖੇਗਾ ਕਿ ਸ਼ੇਅਰਿੰਗ ਨੂੰ ਹੋਸਟ ਐਪਲੀਕੇਸ਼ਨ ਤੋਂ ਵੈਬ ਐਪ ਤੇ ਕਿਵੇਂ ਮੈਪ ਕੀਤਾ ਜਾਣਾ ਚਾਹੀਦਾ ਹੈ. ਹੇਠਾਂ ਦਿੱਤੇ ਮੈਨੀਫੈਸਟ ਵਿਚ ਇਹ ਜਰੂਰੀ ਤੌਰ ਤੇ ਕਹਿੰਦਾ ਹੈ &quot;ਜਦੋਂ ਇੱਕ ਉਪਭੋਗਤਾ ਇੱਕ ਫਾਇਲ ਦੀ ਕਿਸਮ &#39;image / *&#39; ਸ਼ੇਅਰ ਕਰਦਾ ਹੈ ਤਾਂ ਇੱਕ &#39;ਫਾਰਮ / POST&#39; ਬੇਨਤੀ ਨੂੰ &#39;/ share / image /&#39; ਅਤੇ &#39;&#39; ਫਾਇਲ &#39;&#39; ਦਾ ਨਾਮ ਦਿਓ &#39;&#39;.

* manifest.json *
```JSON
{
  "name": "Blog: Share Image",
  "short_name": "Blog: Share Image",
  "start_url": "/share/image/",
  "theme_color": "#000000",
  "background_color": "#000000",
  "icons": [ {
      "sizes": "192x192",
      "src": "/images/me.png",
      "type": "image/png"
  }],
  "share_target": {
    "action": "/share/image/",
    "method": "POST",
    "enctype": "multipart/form-data",
    "params": {
      "files": [
        {
          "name": "file",
          "accept": ["image/*"]
        }
      ]
    }
  },
  "display": "standalone",
  "scope": "/share/"
}
```

ਇੱਕ ਵਾਰ ਉਪਯੋਗਕਰਤਾ ਤੁਹਾਡੇ ਵੈਬ ਐਪਲੀਕੇਸ਼ਨ ਤੇ ਸ਼ੇਅਰ ਕਰਨ ਤੋਂ ਬਾਅਦ, Chrome ਪਾਇਲਲੋਡ ਦੇ ਤੌਰ ਤੇ ਫਾਈਲ ਡਾਟਾ ਦੇ ਨਾਲ ਤੁਹਾਡੀ ਸਾਈਟ ਤੇ ਵੈਬ ਅਨੁਰੋਧ ਕਰੇਗਾ.

ਇਹ ਸਿਫਾਰਸ਼ ਕੀਤੀ ਜਾਂਦੀ ਹੈ ਕਿ ਤੁਸੀਂ ਆਪਣੇ ਸੇਵਾ ਕਰਮਚਾਰੀ ਦੇ ਅੰਦਰ POST ਦੀ ਬੇਨਤੀ ਨੂੰ ਸੰਭਾਲੋ, ਤਾਂ ਜੋ 1) ਇਹ ਤੇਜ਼ ਹੋਵੇ, 2) ਨੈਟਵਰਕ ਉਪਲਬਧ ਨਾ ਹੋਵੇ. ਤੁਸੀਂ ਇਹ ਇਸ ਤਰਾਂ ਕਰ ਸਕਦੇ ਹੋ:

* serviceworker.js * - [demo](/share/image/sw.js)

```Javascript
onfetch = async (event) => {
  if (event.request.method !== 'POST') return;
  if (event.request.url.startsWith('https://paul.kinlan.me/share/image/') === false) return;

  /* This is to fix the issue Jake found */
  event.respondWith(Response.redirect('/share/image/'));
  
  event.waitUntil(async function () {
    const data = await event.request.formData();
    const client = await self.clients.get(event.resultingClientId || event.clientId);
    // Get the data from the named element 'file'
    const file = data.get('file');

    console.log('file', file);
    client.postMessage({ file, action: 'load-image' });
  }());
};
```

ਉੱਪਰ ਕੁਝ ਹੋਣ ਵਾਲੀਆਂ ਕੁਝ ਦਿਲਚਸਪ ਚੀਜ਼ਾਂ ਹਨ, ਜਿਹਨਾਂ ਨੂੰ ਤੁਰੰਤ ਇਹ ਸੰਖੇਪ ਰੂਪ ਦਿੱਤਾ ਜਾ ਸਕਦਾ ਹੈ:

* ਇੱਕ ਦਿਸ਼ਾ ਪਰਿਵਰਤਨ ਕਰ ਕੇ, `POST` ਬੇਨਤੀ ਦੇ ਨਤੀਜੇ ਵਜੋਂ UI ਨੂੰ ਪੇਸ਼ ਕਰੋ
* ਉਹ ਡੇਟਾ ਪੜ੍ਹੋ ਜੋ `event.request.formData()` ਦੁਆਰਾ ਫਾਰਮ ਰਾਹੀਂ ਪੇਸ਼ ਕੀਤਾ ਜਾਂਦਾ ਹੈ
* ਖੁੱਲੇ ਝਰੋਖੇ ਨੂੰ ਡੇਟਾ ਭੇਜੋ (ਇਹ ਉਹੀ UI ਹੋਵੇਗਾ ਜਿਸ ਨੂੰ ਅਸੀਂ ਯੂਜ਼ਰ ਨੂੰ ਪਹਿਲੀ ਸਥਿਤੀ ਵਿੱਚ ਭੇਜ ਦਿੱਤਾ ਹੈ).

ਇਹ ਪੂਰੀ ਤਰ੍ਹਾਂ ਤੁਹਾਡੇ &#39;ਤੇ ਨਿਰਭਰ ਹੈ ਕਿ ਤੁਸੀਂ ਆਪਣੇ ਸੇਵਾ ਵਰਕ ਨੂੰ ਕਿਵੇਂ ਭੇਜਿਆ ਗਿਆ ਹੈ, ਪਰ ਮੇਰੇ ਐਪ ਦੇ ਮਾਮਲੇ ਵਿਚ ਮੈਨੂੰ ਇਸ ਨੂੰ ਸਿੱਧੇ ਯੂ.ਆਈ. ਵਿਚ ਦਿਖਾਉਣ ਦੀ ਲੋੜ ਸੀ ਤਾਂ ਜੋ ਮੈਨੂੰ ਉਸ ਵਿੰਡੋ ਨੂੰ ਲੱਭਣਾ `postMessage` ਵਰਤੋਂ ਉਪਭੋਗਤਾ ਕਰ ਰਿਹਾ ਹੈ ਅਤੇ `postMessage` ਉੱਥੇ ਡਾਟਾ.

* index.html * - [demo](/share/image/index.html)

```Javascript
navigator.serviceWorker.onmessage = (event) => {
  console.log(event);
  imageBlob = event.data.file;
  // Update the UI with the data that has been shared to it.
  imageShare.src = URL.createObjectURL(imageBlob);
};
```

ਅਤੇ ਇਹ ਇਸ ਬਾਰੇ ਹੈ ਜੇ ਤੁਹਾਡੇ ਕੋਲ ਪਹਿਲਾਂ ਤੋਂ ਹੀ ਆਪਣੇ ਵੈਬ ਫਾਰਮਾਂ ਲਈ ਇੱਕ API ਅੰਤਨਭ ਹੈ, ਤਾਂ ਇਹ ਇੱਕ ਸਧਾਰਨ, ਪ੍ਰਭਾਵੀ ਸ਼ਕਤੀਸ਼ਾਲੀ ਐਡਯੋਗੇਸ਼ਨ ਹੈ ਜੋ ਤੁਸੀਂ ਆਪਣੀ ਸਾਈਟ ਤੇ ਕਰ ਸਕਦੇ ਹੋ.

ਵੈੱਬ ਸ਼ੇਅਰ ਟਾਰਗੇਟ API ਅਵਿਸ਼ਵਾਸੀ ਸ਼ਕਤੀਸ਼ਾਲੀ ਪਲੇਟਫਾਰਮ ਅਮੀਮਿਕ ਹੈ ਜੋ ਦੂਜੀਆਂ ਰੁਕਾਵਟਾਂ ਨੂੰ ਤੋੜਦਾ ਹੈ ਜੋ ਵੈਬ ਐਪਸ ਆਪਣੇ ਹੋਸਟ ਪਲੇਟਫਾਰਮ ਤੇ ਹੁੰਦੇ ਹਨ.